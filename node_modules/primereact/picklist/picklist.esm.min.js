import*as e from"react";import t,{ariaLabel as n,PrimeReactContext as o,FilterService as r}from"primereact/api";import{ComponentBase as a,useHandleStyle as i}from"primereact/componentbase";import{useMatchMedia as l,useUpdateEffect as c}from"primereact/hooks";import{classNames as s,mergeProps as u,ObjectUtils as p,IconUtils as m,UniqueComponentId as d,DomHandler as f}from"primereact/utils";import{Button as v}from"primereact/button";import{AngleDoubleDownIcon as g}from"primereact/icons/angledoubledown";import{AngleDoubleUpIcon as y}from"primereact/icons/angledoubleup";import{AngleDownIcon as T}from"primereact/icons/angledown";import{AngleUpIcon as h}from"primereact/icons/angleup";import{SearchIcon as S}from"primereact/icons/search";import{Ripple as b}from"primereact/ripple";import{AngleDoubleLeftIcon as I}from"primereact/icons/angledoubleleft";import{AngleDoubleRightIcon as E}from"primereact/icons/angledoubleright";import{AngleLeftIcon as w}from"primereact/icons/angleleft";import{AngleRightIcon as A}from"primereact/icons/angleright";function N(e){throw new TypeError('"'+e+'" is read-only')}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==k(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function L(e){var t=C(e,"string");return"symbol"===k(t)?t:String(t)}function O(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function x(e){if(Array.isArray(e))return D(e)}function F(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function M(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e){return x(e)||F(e)||M(e)||P()}function R(e){if(Array.isArray(e))return e}function K(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}function B(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){return R(e)||K(e,t)||M(e,t)||B()}var U=a.extend({defaultProps:{__TYPE:"PickList",id:null,source:null,target:null,sourceHeader:null,targetHeader:null,style:null,className:null,sourceStyle:null,targetStyle:null,sourceSelection:null,targetSelection:null,showSourceControls:!0,showTargetControls:!0,metaKeySelection:!0,onFocus:null,onBlur:null,filter:!1,filterBy:null,filterMatchMode:"contains",targetFilterIcon:null,sourceFilterIcon:null,moveAllToSourceIcon:null,moveToSourceIcon:null,moveAllToTargetIcon:null,moveToTargetIcon:null,moveBottomIcon:null,moveUpIcon:null,moveTopIcon:null,moveDownIcon:null,filterLocale:void 0,sourceFilterValue:null,targetFilterValue:null,showSourceFilter:!0,showTargetFilter:!0,sourceFilterPlaceholder:null,targetFilterPlaceholder:null,sourceFilterTemplate:null,targetFilterTemplate:null,tabIndex:0,dataKey:null,breakpoint:"960px",itemTemplate:null,sourceItemTemplate:null,targetItemTemplate:null,onChange:null,onMoveToSource:null,onMoveAllToSource:null,onMoveToTarget:null,onMoveAllToTarget:null,onSourceSelectionChange:null,onTargetSelectionChange:null,onSourceFilterChange:null,onTargetFilterChange:null,children:void 0},css:{classes:{root:"p-picklist p-component",buttons:"p-picklist-buttons p-picklist-transfer-buttons",header:"p-picklist-header",filterIcon:"p-picklist-filter-icon",filter:"p-picklist-filter",filterInput:"p-picklist-filter-input p-inputtext p-component",filterContainer:"p-picklist-filter-container",list:"p-picklist-list",listWrapper:"p-picklist-list-wrapper",listSourceWrapper:"p-picklist-list-wrapper p-picklist-source-wrapper",listTargetWrapper:"p-picklist-list-wrapper p-picklist-target-wrapper",listSource:"p-picklist-list p-picklist-source",listTarget:"p-picklist-list p-picklist-target",item:function(e){return s("p-picklist-item",{"p-highlight":e.selected,"p-focus":e.focused})},sourceControls:"p-picklist-source-controls p-picklist-buttons",targetControls:"p-picklist-target-controls p-picklist-buttons"},styles:"\n@layer primereact {\n    .p-picklist {\n        display: flex;\n    }\n\n    .p-picklist-buttons {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n\n    .p-picklist-list-wrapper {\n        flex: 1 1 50%;\n    }\n\n    .p-picklist-list {\n        list-style-type: none;\n        margin: 0;\n        padding: 0;\n        overflow: auto;\n        min-height: 12rem;\n        max-height: 24rem;\n    }\n\n    .p-picklist-item {\n        cursor: pointer;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .p-picklist-filter {\n        position: relative;\n    }\n\n    .p-picklist-filter-icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -.5rem;\n    }\n\n    .p-picklist-filter-input {\n        width: 100%;\n    }\n}\n"}}),H=e.memo((function(t){var o=t.ptm,r=t.cx,a=t.unstyled,i=t.moveUpIcon||e.createElement(h,null),l=t.moveTopIcon||e.createElement(y,null),c=t.moveDownIcon||e.createElement(T,null),m=t.moveBottomIcon||e.createElement(g,null),d=!t.selection||!t.selection.length,f=u({className:s(t.className,r("controls"))},o("controls",{hostName:t.hostName}));return e.createElement("div",f,e.createElement(v,{disabled:d,type:"button",icon:i,onClick:function(e){var n=t.selection;if(n&&n.length){for(var o=_(t.list),r=0;r<n.length;r++){var a=p.findIndexInList(n[r],o,t.dataKey);if(0===a)break;var i=o[a-1];o[a-1]=o[a],o[a]=i}t.onReorder&&t.onReorder({originalEvent:e,value:o,direction:"up"})}},pt:o("moveUpButton"),unstyled:a,"aria-label":n("moveUp"),__parentMetadata:{parent:t.metaData}}),e.createElement(v,{disabled:d,type:"button",icon:l,onClick:function(e){var n=t.selection;if(n&&n.length){for(var o=_(t.list),r=0;r<n.length;r++){var a=p.findIndexInList(n[r],o,t.dataKey);if(0===a)break;var i=o.splice(a,1)[0];o.unshift(i)}t.onReorder&&t.onReorder({originalEvent:e,value:o,direction:"top"})}},pt:o("moveTopButton"),unstyled:a,"aria-label":n("moveTop"),__parentMetadata:{parent:t.metaData}}),e.createElement(v,{disabled:d,type:"button",icon:c,onClick:function(e){var n=t.selection;if(n&&n.length){for(var o=_(t.list),r=n.length-1;r>=0;r--){var a=p.findIndexInList(n[r],o,t.dataKey);if(a===o.length-1)break;var i=o[a+1];o[a+1]=o[a],o[a]=i}t.onReorder&&t.onReorder({originalEvent:e,value:o,direction:"down"})}},pt:o("moveDownButton"),unstyled:a,"aria-label":n("moveDown"),__parentMetadata:{parent:t.metaData}}),e.createElement(v,{disabled:d,type:"button",icon:m,onClick:function(e){var n=t.selection;if(n&&n.length){for(var o=_(t.list),r=n.length-1;r>=0;r--){var a=p.findIndexInList(n[r],o,t.dataKey);if(a===o.length-1)break;var i=o.splice(a,1)[0];o.push(i)}t.onReorder&&t.onReorder({originalEvent:e,value:o,direction:"bottom"})}},pt:o("moveBottomButton"),unstyled:a,"aria-label":n("moveBottom"),__parentMetadata:{parent:t.metaData}}))}));H.displayName="PickListControls";var W=e.memo((function(t){var n=t.ptm,o=t.cx,r=t.template?t.template(t.value):t.value,a=u({className:s(t.className,o("item",{selected:t.selected,focused:t.focused})),id:t.id,onClick:function(e){t.onClick&&t.onClick({originalEvent:e,value:t.value,id:t.id})},onKeyDown:function(e){t.onKeyDown&&t.onKeyDown({originalEvent:e,value:t.value})},onFocus:function(e){t.onFocus&&t.onFocus(e)},onMouseDown:function(e){t.onMouseDown&&t.onMouseDown(e)},role:"option","aria-selected":t.selected,"data-p-highlight":t.selected,"data-p-focused":t.focused},n("item",{hostName:t.hostName,context:{selected:t.selected}}));return e.createElement("li",a,r,e.createElement(b,null))}));function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}W.displayName="PickListItem";var Q=e.memo(e.forwardRef((function(t,n){var o=e.useRef(null),r=t.ptm,a=t.cx,i=function(e,n){return r(e,J({hostName:t.hostName},n))},l=function(e){return-1!==p.findIndexInList(e,t.selection,t.dataKey)},c=function(e){t.onFilter&&t.onFilter({originalEvent:e,value:e.target.value,type:t.type})},d=function(e){13===e.which&&e.preventDefault()};e.useImperativeHandle(n,(function(){return{getElement:function(){return o.current}}}));var f,v,g,y=(f=u({className:a("header")},i("header")),t.header?e.createElement("div",f,p.getJSXElement(t.header,t)):null),T=function(){var n=u({className:a("filterIcon")},i("filterIcon")),o=m.getJSXIcon("source"===t.type?t.sourceFilterIcon||e.createElement(S,n):t.targetFilterIcon||e.createElement(S,n),J({},n),{props:t});if(t.showFilter){var r=u({className:a("filter")},i("filter")),l=u({type:"text",value:t.filterValue,onChange:c,onKeyDown:d,placeholder:t.placeholder,className:a("filterInput")},i("filterInput")),s=e.createElement("div",r,e.createElement("input",l),e.createElement("span",null," ",o," "));if(t.filterTemplate)s=p.getJSXElement(t.filterTemplate,{className:"p-picklist-filter",inputProps:{className:"p-picklist-filter-input p-inputtext p-component",onChange:c,onKeyDown:d},iconClassName:"p-picklist-filter-icon",element:s,props:t});var f=u({className:a("filterContainer")},i("filterContainer"));return e.createElement("div",f,s)}return null}(),h=(v=t.list?t.list.map((function(n,o){var i=t.parentId+"_"+o,c=l(n);return e.createElement(W,{hostName:t.hostName,key:i,id:i,index:o,focused:i===t.focusedOptionId,value:n,template:t.itemTemplate,selected:c,onClick:t.onItemClick,onKeyDown:t.onItemKeyDown,onMouseDown:function(e){return t.onOptionMouseDown(J(J({},e),{},{index:o,type:t.type}))},ptm:r,cx:a})})):null,g=u({ref:o,className:s(t.listClassName,a("list")),role:"listbox",id:t.parentId+"_"+t.type+"_list","aria-multiselectable":!0,"aria-activedescendant":t.ariaActivedescendant,tabIndex:t.list&&t.list.length>0?t.tabIndex:-1,onKeyDown:t.onListKeyDown,onFocus:function(e){t.onListFocus(e,t.type)},onBlur:t.onListBlur,style:t.style},i("list")),e.createElement("ul",g,v)),b=u({className:s(t.className,a("listWrapper"))},i("listWrapper"));return e.createElement("div",b,y,T,h)})));function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,L(o.key),o)}}function G(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Q.displayName="PickListSubList";var z=Object.freeze({STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter",CUSTOM:"custom"}),Z=G((function e(){X(this,e)}));O(Z,"ripple",!1),O(Z,"inputStyle","outlined"),O(Z,"locale","en"),O(Z,"appendTo",null),O(Z,"cssTransition",!0),O(Z,"autoZIndex",!0),O(Z,"hideOverlaysOnDocumentScrolling",!1),O(Z,"nonce",null),O(Z,"nullSortOrder",1),O(Z,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100,toast:1200}),O(Z,"pt",void 0),O(Z,"filterMatchModeOptions",{text:[z.STARTS_WITH,z.CONTAINS,z.NOT_CONTAINS,z.ENDS_WITH,z.EQUALS,z.NOT_EQUALS],numeric:[z.EQUALS,z.NOT_EQUALS,z.LESS_THAN,z.LESS_THAN_OR_EQUAL_TO,z.GREATER_THAN,z.GREATER_THAN_OR_EQUAL_TO],date:[z.DATE_IS,z.DATE_IS_NOT,z.DATE_BEFORE,z.DATE_AFTER]}),O(Z,"changeTheme",(function(e,t,n,o){var r,a=document.getElementById(n),i=a.cloneNode(!0),l=a.getAttribute("href").replace(e,t);i.setAttribute("id",n+"-clone"),i.setAttribute("href",l),i.addEventListener("load",(function(){a.remove(),i.setAttribute("id",n),o&&o()})),null===(r=a.parentNode)||void 0===r||r.insertBefore(i,a.nextSibling)}));var Y={en:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",filter:"Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",custom:"Custom",clear:"Clear",close:"Close",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No available options",emptyMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",previousPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",selectLabel:"Select",unselectLabel:"Unselect",expandLabel:"Expand",collapseLabel:"Collapse"}}};function $(e,t){var n=Z.locale;try{var o=ee(n).aria[e];if(o)for(var r in t)t.hasOwnProperty(r)&&(o=o.replace("{".concat(r,"}"),t[r]));return o}catch(t){throw new Error("The ".concat(e," option is not found in the current locale('").concat(n,"')."))}}function ee(e){return Y[e||Z.locale]}var te=e.memo((function(t){var n=l("(max-width: ".concat(t.breakpoint,")"),t.breakpoint),o=t.ptm,r=t.cx,a=t.unstyled;function i(o){switch(o){case"moveToTargetIcon":return t.moveToTargetIcon||n?t.moveToTargetIcon||e.createElement(T,null):t.moveToTargetIcon||e.createElement(A,null);case"moveAllToTargetIcon":return t.moveAllToTargetIcon||n?t.moveAllToTargetIcon||e.createElement(g,null):t.moveAllToTargetIcon||e.createElement(E,null);case"moveToSourceIcon":return t.moveToSourceIcon||n?t.moveToSourceIcon||e.createElement(h,null):t.moveToSourceIcon||e.createElement(w,null);case"moveAllToSourceIcon":return t.moveAllToSourceIcon||n?t.moveAllToSourceIcon||e.createElement(y,null):t.moveAllToSourceIcon||e.createElement(I,null);default:return null}}var c=m.getJSXIcon(i("moveToTargetIcon"),void 0,{props:t,viewChanged:n}),d=m.getJSXIcon(i("moveAllToTargetIcon"),void 0,{props:t,viewChanged:n}),f=m.getJSXIcon(i("moveToSourceIcon"),void 0,{props:t,viewChanged:n}),S=m.getJSXIcon(i("moveAllToSourceIcon"),void 0,{props:t,viewChanged:n}),b=p.isEmpty(t.sourceSelection)||p.isEmpty(t.visibleSourceList),N=p.isEmpty(t.targetSelection)||p.isEmpty(t.visibleTargetList),k=p.isEmpty(t.visibleSourceList),C=p.isEmpty(t.visibleTargetList),L=u({className:s(t.className,r("buttons"))},o("buttons",{hostName:t.hostName}));return e.createElement("div",L,e.createElement(v,{disabled:b,type:"button",icon:c,onClick:function(e){var n=t.sourceSelection;if(p.isNotEmpty(n)){for(var o=_(t.target),r=_(t.source),a=0;a<n.length;a++){var i=n[a];-1===p.findIndexInList(i,o,t.dataKey)&&o.push(r.splice(p.findIndexInList(i,r,t.dataKey),1)[0])}t.onTransfer&&t.onTransfer({originalEvent:e,source:r,target:o,direction:"toTarget"})}},pt:o("moveToTargetButton"),unstyled:a,"aria-label":$("moveToTarget"),__parentMetadata:{parent:t.metaData}}),e.createElement(v,{disabled:k,type:"button",icon:d,onClick:function(e){if(t.source){var n=[].concat(_(t.target),_(t.visibleSourceList)),o=t.source.filter((function(e){return!t.visibleSourceList.some((function(t){return t===e}))}));t.onTransfer&&t.onTransfer({originalEvent:e,source:o,target:n,direction:"allToTarget"})}},pt:o("moveAllToTargetButton"),unstyled:a,"aria-label":$("moveAllToTarget"),__parentMetadata:{parent:t.metaData}}),e.createElement(v,{disabled:N,type:"button",icon:f,onClick:function(e){var n=t.targetSelection;if(p.isNotEmpty(n)){for(var o=_(t.target),r=_(t.source),a=0;a<n.length;a++){var i=n[a];-1===p.findIndexInList(i,r,t.dataKey)&&r.push(o.splice(p.findIndexInList(i,o,t.dataKey),1)[0])}t.onTransfer&&t.onTransfer({originalEvent:e,source:r,target:o,direction:"toSource"})}},pt:o("moveToSourceButton"),unstyled:a,"aria-label":$("moveToSource"),__parentMetadata:{parent:t.metaData}}),e.createElement(v,{disabled:C,type:"button",icon:S,onClick:function(e){if(t.source){var n=[].concat(_(t.source),_(t.visibleTargetList)),o=t.target.filter((function(e){return!t.visibleTargetList.some((function(t){return t===e}))}));t.onTransfer&&t.onTransfer({originalEvent:e,source:n,target:o,direction:"allToSource"})}},pt:o("moveAllToSourceButton"),unstyled:a,"aria-label":$("moveAllToSource"),__parentMetadata:{parent:t.metaData}}))}));function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}te.displayName="PickListTransferControls";var re=e.memo(e.forwardRef((function(n,a){var l=e.useContext(o),m=U.getProps(n,l),v=j(e.useState([]),2),g=v[0],y=v[1],T=j(e.useState([]),2),h=T[0],S=T[1],b=j(e.useState(""),2),I=b[0],E=b[1],w=j(e.useState(""),2),A=w[0],k=w[1],C=j(e.useState(m.id),2),L=C[0],D=C[1],x=j(e.useState(-1),2),F=x[0],M=x[1],P=j(e.useState(null),2),R=P[0],K=P[1],B=j(e.useState({source:!1,target:!1}),2),W=B[0],V=B[1],J={props:m,state:{sourceSelection:g,targetSelection:h,sourceFilterValue:I,targetFilterValue:A,attributeSelector:L}},q=U.setMetaData(J),G=q.ptm,X=q.cx;i(U.css.styles,q.isUnstyled,{name:"picklist"});var z=e.useRef(null),Z=e.useRef(null),Y=e.useRef(null),$=e.useRef(null),ee=e.useRef(null),ne=e.useRef(null),re=m.sourceSelection?m.sourceSelection:g,ae=m.targetSelection?m.targetSelection:h,ie=m.onSourceFilterChange?m.sourceFilterValue:I,le=m.onTargetFilterChange?m.targetFilterValue:A,ce=p.isNotEmpty(m.filterBy),se=ce&&m.showSourceFilter,ue=ce&&m.showTargetFilter,pe=function(e,t){if(e)switch(t){case"up":de(e,-1);break;case"top":e.scrollTop=0;break;case"down":de(e,1);break;case"bottom":setTimeout((function(){return e.scrollTop=e.scrollHeight}),100)}},me=function(e,t,n){m.onChange&&m.onChange({originalEvent:e.originalEvent,source:t,target:n})},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getElementsByClassName("p-highlight");p.isNotEmpty(n)&&f.scrollInView(e,-1===t?n[0]:n[n.length-1])},fe=function(e,t,n){"sourceSelection"===t?y(e.value):S(e.value),n&&n(e),p.isNotEmpty(re)&&"targetSelection"===t?y([]):p.isNotEmpty(ae)&&"sourceSelection"===t&&S([])},ve=function(e){var t=e.originalEvent,n=e.value,o=j("source"===e.type?[E,m.onSourceFilterChange]:[k,m.onTargetFilterChange],2),r=o[0],a=o[1];a?a({originalEvent:t,value:n}):r(n)},ge=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().toLocaleLowerCase(m.filterLocale);return Te(m.source,e)},ye=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().toLocaleLowerCase(m.filterLocale);return Te(m.target,e)},Te=function(e,t){var n=ce?m.filterBy.split(","):[];return r.filter(e,n,t,m.filterMatchMode,m.filterLocale)},he=function(e,t){var n=j("source"===t?[ie,ge]:[le,ye],2),o=n[0],r=n[1];return ce&&p.isNotEmpty(o)?r(o):e},Se=he(m.source,"source"),be=he(m.target,"target"),Ie=function(e,t){var n=Re(t),o=f.findSingle(n,'[data-p-highlight="true"]')||f.findSingle(n,'[data-pc-section="item"]'),r=n&&n.children?_(n.children):[];if(o){var a=p.findIndexInList(o,r);V(oe(oe({},W),{},O({},t,!0))),Pe(-1!==F?F:o?a:-1,t),m.onFocus&&m.onFocus(e)}},Ee=function(e,t){V(oe(oe({},W),{},O({},t,!1))),M(-1),m.onBlur&&m.onBlur(e)},we=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.originalEvent,r=e.value,a=e.id,i="source"===t,l=_(i?re:ae),c=p.findIndexInList(r,l,m.dataKey),s=-1!==c,u=m.metaKeySelection;if(n||M(a),u){var d=o.metaKey||o.ctrlKey||o.shiftKey;s&&d?l.splice(c,1):(d||(l.length=0),l.push(r))}else s?l.splice(c,1):l.push(r);i?fe({originalEvent:o,value:l},"sourceSelection",m.onSourceSelectionChange):fe({originalEvent:o,value:l},"targetSelection",m.onTargetSelectionChange)},Ae=function(e){var t=e.index,n=e.type;V(oe(oe({},W),{},O({},n,!0))),M(t)},Ne=function(e,t){switch(e.code){case"ArrowDown":ke(e,t);break;case"ArrowUp":Ce(e,t);break;case"Home":De(e,t);break;case"End":xe(e,t);break;case"Enter":case"NumpadEnter":Le(e,t);break;case"Space":Oe(e,t);break;case"KeyA":if(e.ctrlKey){var n="source"===t;n?y(_(Se)):S(_(be)),fe({originalEvent:e,value:_(Se)},n?"sourceSelection":"targetSelection",n?m.onSourceSelectionChange:m.onTargetSelectionChange),e.preventDefault()}}},ke=function(e,t){var n=Fe(F,t),o=he("source"===t?m.source:m.target,t);Pe(n,t),o&&o.length>0&&e.shiftKey&&we({originalEvent:e,value:o[n]},t,!0),e.preventDefault()},Ce=function(e,t){var n=Me(F,t),o=he("source"===t?m.source:m.target,t);Pe(n,t),o&&o.length>0&&e.shiftKey&&we({originalEvent:e,value:o[n]},t,!0),e.preventDefault()},Le=function(e,t){var n=Re(t),o=he("source"===t?m.source:m.target,t),r=f.find(n,'[data-pc-section="item"]'),a=f.findSingle(n,'[data-pc-section="item"][id='.concat(F,"]")),i=a&&a.getAttribute("id"),l=_(r).findIndex((function(e){return e===a}));o&&o.length>0&&we({originalEvent:e,value:o[l],id:i},t),e.preventDefault()},Oe=function(e,t){e.preventDefault();var n="source"===t,o=n?g:h;if(e.shiftKey&&o&&o.length>0){var r=n?Se:be,a=Re(t),i=f.find(a,'[data-pc-section="item"]'),l=p.findIndexInList(o[0],_(r)),c=f.findSingle(a,'[data-pc-section="item"][id='.concat(F,"]")),s=_(i).findIndex((function(e){return e===c}));_(r).slice(Math.min(l,s),Math.max(l,s)+1),N("selection"),n?fe({originalEvent:e,value:o},"sourceSelection",m.onSourceSelectionChange):fe({originalEvent:e,value:o},"targetSelection",m.onTargetSelectionChange)}else Le(e,t)},De=function(e,t){if(e.ctrlKey&&e.shiftKey){var n="source"===t,o=n?Se:be,r=Re(t),a=f.find(r,'[data-pc-section="item"]'),i=f.findSingle(r,'[data-pc-section="item"][id='.concat(F,"]")),l=_(a).findIndex((function(e){return e===i})),c=_(o).slice(0,l+1);n?fe({originalEvent:e,value:c},"sourceSelection",m.onSourceSelectionChange):fe({originalEvent:e,value:c},"targetSelection",m.onTargetSelectionChange)}else Pe(0,t);e.preventDefault()},xe=function(e,t){var n=Re(t),o=f.find(n,'[data-pc-section="item"]');if(e.ctrlKey&&e.shiftKey){var r="source"===t,a=r?Se:be,i=f.findSingle(n,'[data-pc-section="item"][id='.concat(F,"]")),l=_(o).findIndex((function(e){return e===i})),c=_(a).slice(l,o.length);r?fe({originalEvent:e,value:c},"sourceSelection",m.onSourceSelectionChange):fe({originalEvent:e,value:c},"targetSelection",m.onTargetSelectionChange)}else Pe(o.length-1,t);e.preventDefault()},Fe=function(e,t){var n=Re(t),o=_(f.find(n,'[data-pc-section="item"]')).findIndex((function(t){return t.id===e}));return o>-1?o+1:0},Me=function(e,t){var n=Re(t),o=_(f.find(n,'[data-pc-section="item"]')).findIndex((function(t){return t.id===e}));return o>-1?o-1:0},Pe=function(e,t){var n=Re(t),o=f.find(n,'[data-pc-section="item"]'),r=e>=o.length?o.length-1:e<0?0:e;M(o[r].getAttribute("id")),_e(o[r].getAttribute("id"),t)},_e=function(e,t){var n=Re(t),o=f.findSingle(n,'[data-pc-section="item"][id="'.concat(e,'"]'));o&&o.scrollIntoView&&o.scrollIntoView({block:"nearest",inline:"start"})},Re=function(e){return"source"===e?Z.current.getElement():Y.current.getElement()},Ke=function(){if(!ne.current){ne.current=f.createInlineStyle(l&&l.nonce||t.nonce,l&&l.styleContainer);var e="\n@media screen and (max-width: ".concat(m.breakpoint,") {\n    .p-picklist[").concat(L,"] {\n        flex-direction: column;\n    }\n\n    .p-picklist[").concat(L,"] .p-picklist-buttons {\n        padding: var(--content-padding);\n        flex-direction: row;\n    }\n\n    .p-picklist[").concat(L,"] .p-picklist-buttons .p-button {\n        margin-right: var(--inline-spacing);\n        margin-bottom: 0;\n    }\n\n    .p-picklist[").concat(L,"] .p-picklist-buttons .p-button:last-child {\n        margin-right: 0;\n    }\n}\n");ne.current.innerHTML=e}};e.useImperativeHandle(a,(function(){return{props:m,getElement:function(){return z.current}}})),c((function(){return L&&(z.current.setAttribute(L,""),Ke()),function(){ne.current=f.removeInlineStyle(ne.current)}}),[L,m.breakpoint]),c((function(){m.id||L||D(d()),$.current&&(pe($.current,ee.current),$.current=null,ee.current=null)})),c((function(){K(-1!==F?F:null)}),[F]);var Be=m.sourceItemTemplate?m.sourceItemTemplate:m.itemTemplate,je=m.targetItemTemplate?m.targetItemTemplate:m.itemTemplate,Ue=u({id:L,ref:z,className:s(m.className,X("root")),style:m.style},U.getOtherProps(m),G("root"));return e.createElement("div",Ue,m.showSourceControls&&e.createElement(H,{hostName:"PickList",list:m.source,selection:re,onReorder:function(e){me(e,e.value,m.target),$.current=Re("source"),ee.current=e.direction},className:X("sourceControls"),dataKey:m.dataKey,moveUpIcon:m.moveUpIcon,moveTopIcon:m.moveTopIcon,moveDownIcon:m.moveDownIcon,moveBottomIcon:m.moveBottomIcon,ptm:G,cx:X,unstyled:m.unstyled,metaData:J}),e.createElement(Q,{hostName:"PickList",ref:Z,type:"source",list:Se,parentId:L,selection:re,onSelectionChange:function(e){return fe(e,"sourceSelection",m.onSourceSelectionChange)},onListKeyDown:function(e){return Ne(e,"source")},onListFocus:function(e){return Ie(e,"source")},onListBlur:function(e){return Ee(e,"source")},onOptionMouseDown:function(e){return Ae(e)},onItemClick:function(e){return we(e,"source")},focusedOptionId:W.source?R:null,ariaActivedescendant:W.source?R:null,itemTemplate:Be,header:m.sourceHeader,style:m.sourceStyle,className:X("listSourceWrapper"),listClassName:X("listSource"),metaKeySelection:m.metaKeySelection,tabIndex:m.tabIndex,dataKey:m.dataKey,filterValue:ie,onFilter:ve,showFilter:se,placeholder:m.sourceFilterPlaceholder,filterTemplate:m.sourceFilterTemplate,sourceFilterIcon:m.sourceFilterIcon,ptm:G,cx:X}),e.createElement(te,{hostName:"PickList",onTransfer:function(e){var t=e.originalEvent,n=e.source,o=e.target,r=[];switch(e.direction){case"toTarget":r=re,m.onMoveToTarget&&m.onMoveToTarget({originalEvent:t,value:r});break;case"allToTarget":r=m.source,m.onMoveAllToTarget&&m.onMoveAllToTarget({originalEvent:t,value:r}),r=[];break;case"toSource":r=ae,m.onMoveToSource&&m.onMoveToSource({originalEvent:t,value:r});break;case"allToSource":r=m.target,m.onMoveAllToSource&&m.onMoveAllToSource({originalEvent:t,value:r}),r=[]}fe({originalEvent:t,value:r},"sourceSelection",m.onSourceSelectionChange),fe({originalEvent:t,value:r},"targetSelection",m.onTargetSelectionChange),me(e,n,o)},source:m.source,visibleSourceList:Se,target:m.target,breakpoint:m.breakpoint,visibleTargetList:be,sourceSelection:re,targetSelection:ae,dataKey:m.dataKey,moveToTargetIcon:m.moveToTargetIcon,moveAllToTargetIcon:m.moveAllToTargetIcon,moveToSourceIcon:m.moveToSourceIcon,moveAllToSourceIcon:m.moveAllToSourceIcon,ptm:G,cx:X,unstyled:m.unstyled,metaData:J}),e.createElement(Q,{hostName:"PickList",ref:Y,type:"target",list:be,selection:ae,parentId:L,onSelectionChange:function(e){return fe(e,"targetSelection",m.onTargetSelectionChange)},onListKeyDown:function(e){return Ne(e,"target")},onListFocus:function(e){return Ie(e,"target")},onListBlur:function(e){return Ee(e,"target")},onOptionMouseDown:function(e){return Ae(e)},onItemClick:function(e){return we(e,"target")},focusedOptionId:W.target?R:null,ariaActivedescendant:W.target?R:null,itemTemplate:je,header:m.targetHeader,style:m.targetStyle,className:X("listTargetWrapper"),listClassName:X("listWrapper"),metaKeySelection:m.metaKeySelection,tabIndex:m.tabIndex,dataKey:m.dataKey,filterValue:le,onFilter:ve,showFilter:ue,placeholder:m.targetFilterPlaceholder,filterTemplate:m.targetFilterTemplate,targetFilterIcon:m.targetFilterIcon,ptm:G,cx:X}),m.showTargetControls&&e.createElement(H,{hostName:"PickList",list:m.target,selection:ae,onReorder:function(e){me(e,m.source,e.value),$.current=Re("target"),ee.current=e.direction},className:X("targetControls"),dataKey:m.dataKey,moveUpIcon:m.moveUpIcon,moveTopIcon:m.moveTopIcon,moveDownIcon:m.moveDownIcon,moveBottomIcon:m.moveBottomIcon,ptm:G,cx:X,unstyled:m.unstyled,metaData:J}))})));re.displayName="PickList";export{re as PickList};
