"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("primereact/api"),t=require("primereact/componentbase"),r=require("primereact/hooks"),i=require("primereact/icons/bars"),o=require("primereact/utils"),a=require("primereact/icons/angledown"),u=require("primereact/icons/angleright"),c=require("primereact/ripple");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var m=s(e),f=l(n);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,n){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function b(e){var n=d(e,"string");return"symbol"===p(n)?n:String(n)}function v(e,n,t){return(n=b(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e){if(Array.isArray(e))return e}function g(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n){if(e){if("string"==typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,n):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,n){return y(e)||g(e,n)||I(e,n)||h()}var O=t.ComponentBase.extend({defaultProps:{__TYPE:"Menubar",id:null,model:null,style:null,className:null,start:null,ariaLabel:null,ariaLabelledBy:null,onFocus:null,onBlur:null,submenuIcon:null,menuIcon:null,end:null,children:void 0},css:{classes:{start:"p-menubar-start",end:"p-menubar-end",button:"p-menubar-button",root:function(e){return o.classNames("p-menubar p-component",{"p-menubar-mobile-active":e.mobileActiveState})},separator:"p-menuitem-separator",icon:"p-menuitem-icon",label:"p-menuitem-text",submenuIcon:"p-submenu-icon",menuitem:function(e){return o.classNames("p-menuitem",{"p-menuitem-active p-highlight":e.active,"p-focus":e.focused,"p-disabled":e.disabled})},menu:"p-menubar-root-list",content:"p-menuitem-content",submenu:"p-submenu-list",action:function(e){return o.classNames("p-menuitem-link",{"p-disabled":e.disabled})}},styles:"\n@layer primereact {\n    .p-menubar {\n        display: flex;\n        align-items: center;\n    }\n\n    .p-menubar ul {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n\n    .p-menubar .p-menuitem-link {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        text-decoration: none;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .p-menubar .p-menuitem-text {\n        line-height: 1;\n    }\n\n    .p-menubar .p-menuitem {\n        position: relative;\n    }\n\n    .p-menubar-root-list {\n        display: flex;\n        align-items: center;\n        flex-wrap: wrap;\n    }\n\n    .p-menubar-root-list > li ul {\n        display: none;\n        z-index: 1;\n    }\n\n    .p-menubar-root-list > .p-menuitem-active > .p-submenu-list {\n        display: block;\n    }\n\n    .p-menubar .p-submenu-list {\n        display: none;\n        position: absolute;\n        z-index: 1;\n    }\n\n    .p-menubar .p-submenu-list > .p-menuitem-active > .p-submenu-list {\n        display: block;\n        left: 100%;\n        top: 0;\n    }\n\n    .p-menubar .p-submenu-list .p-menuitem .p-menuitem-content .p-menuitem-link .p-submenu-icon {\n        margin-left: auto;\n    }\n\n    .p-menubar .p-menubar-end {\n        margin-left: auto;\n        align-self: center;\n    }\n\n    .p-menubar-button {\n        display: none;\n        cursor: pointer;\n        align-items: center;\n        justify-content: center;\n        text-decoration: none;\n    }\n}\n"}});function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){v(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=m.memo(m.forwardRef((function(e,n){var t=e.ptm,r=e.cx,i=function(n,r,i){return t(r,{props:e,hostName:e.hostName,context:{item:n,index:i,active:b(n),focused:x(n),disabled:g(n),level:e.level}})},l=function(n,t){g(t)||e.mobileActive?n.preventDefault():e.onItemMouseEnter&&e.onItemMouseEnter({originalEvent:n,processedItem:t})},s=function(e,n){var t=n.item;g(n)?e.preventDefault():(t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t}),f({originalEvent:e,processedItem:n,isFocus:!0}))},f=function(n){e.onLeafClick&&e.onLeafClick(n)},p=function(n){return"".concat(e.id,"_").concat(n.key)},d=function(e,n,t){return e&&e.item?o.ObjectUtils.getItemValue(e.item[n],t):void 0},b=function(n){return e.activeItemPath.some((function(e){return e.key===n.key}))},y=function(e){return!1!==d(e,"visible")},g=function(e){return d(e,"disabled")},x=function(n){return e.focusedItemId===p(n)},I=function(e){return o.ObjectUtils.isNotEmpty(e.items)},h=function(n){return n-e.model.slice(0,n).filter((function(e){return y(e)&&d(e,"separator")})).length+1},E=function(n){var i=e.id+"_separator_"+n,a=o.mergeProps({id:i,key:i,className:r("separator"),role:"separator"},t("separator",{hostName:e.hostName}));return m.createElement("li",a)},O=function(n){var i=n&&n.items;return i?m.createElement(P,{id:e.id,hostName:e.hostName,menuProps:e.menuProps,level:e.level+1,model:i,activeItemPath:e.activeItemPath,focusedItemId:e.focusedItemId,onLeafClick:f,onItemMouseEnter:e.onItemMouseEnter,submenuIcon:e.submenuIcon,ptm:t,style:{display:b(n)?"block":"none"},cx:r}):null},k=function(n,t){var f=n.item;if(!y(n))return null;var E=p(n),k=b(n),P=x(n),S=g(n)||!1,w=I(n),N=o.classNames("p-menuitem-link",{"p-disabled":S}),D=o.classNames("p-menuitem-icon",d(n,"icon")),U=o.mergeProps({className:r("icon")},i(n,"icon",t)),K=o.IconUtils.getJSXIcon(f.icon,j({},U),{props:e.menuProps}),A=o.mergeProps({className:r("label")},i(n,"label",t)),M=f.label&&m.createElement("span",A,f.label),C=d(n,"items"),L=o.mergeProps({className:r("submenuIcon")},i(n,"submenuIcon",t)),R=C&&o.IconUtils.getJSXIcon(e.root?e.submenuIcon||m.createElement(a.AngleDownIcon,L):e.submenuIcon||m.createElement(u.AngleRightIcon,L),j({},L),{props:j({menuProps:e.menuProps},e)}),H=O(n),T=o.mergeProps({href:f.url||"#",tabIndex:"-1","aria-hidden":"true",className:r("action",{disabled:S}),onFocus:function(e){return e.stopPropagation()},target:d(n,"target"),"aria-haspopup":null!=C},i(n,"action",t)),_=m.createElement("a",T,K,M,R,m.createElement(c.Ripple,null));f.template&&(_=o.ObjectUtils.getJSXElement(f.template,f,{className:N,labelClassName:"p-menuitem-text",iconClassName:D,submenuIconClassName:"p-submenu-icon",element:_,props:e}));var B=o.mergeProps({onClick:function(e){return s(e,n)},onMouseEnter:function(e){return l(e,n)},className:r("content")},i(n,"content",t)),q=d(n,"className"),F=o.mergeProps(v({id:E,key:E,role:"menuitem","aria-label":f.label,"aria-disabled":S,"aria-expanded":w?k:void 0,"aria-haspopup":w&&!f.url?"menu":void 0,"aria-level":e.level+1,"aria-setsize":e.model.filter((function(e){return y(e)&&!d(e,"separator")})).length,"aria-posinset":h(t),"data-p-highlight":k,"data-p-focused":P,"data-p-disabled":S,className:o.classNames(q,r("menuitem",{active:k,focused:P,disabled:S}))},"data-p-disabled",S||!1),i(n,"menuitem",t));return m.createElement("li",F,m.createElement("div",B,_),H)},S=e.root?"menubar":"menu",w=e.root?"menu":"submenu",N=e.root?"0":null,D=e.model?e.model.map((function(e,n){return d(e,"separator")?E(n):k(e,n)})):null,U=o.mergeProps({ref:n,className:r(w),level:e.level,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:e.onKeyDown,id:e.id,tabIndex:N,"aria-activedescendant":e.ariaActivedescendant,style:e.style,role:S},t(w));return m.createElement("ul",U,D)})));function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){v(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}P.displayName="MenubarSub";var N=m.memo(m.forwardRef((function(e,a){var u=m.useContext(n.PrimeReactContext),c=O.getProps(e,u),l=E(m.useState(c.id),2),s=l[0],p=l[1],d=E(m.useState(!1),2),b=d[0],y=d[1],g=E(m.useState(!1),2),x=g[0],I=g[1],h=E(m.useState({index:-1,level:0,parentKey:""}),2),k=h[0],j=h[1],S=E(m.useState(null),2),N=S[0],D=S[1],U=E(m.useState([]),2),K=U[0],A=U[1],M=E(m.useState([]),2),C=M[0],L=M[1],R=E(m.useState([]),2),H=R[0],T=R[1],_=E(m.useState(!1),2),B=_[0],q=_[1],F=E(m.useState(!1),2),z=F[0],J=F[1],X=m.useRef(null),Z=m.useRef(null),V=m.useRef(null),W=m.useRef(""),Y=m.useRef(null),$=m.useRef(!1),G=O.setMetaData({props:c,state:{id:s,mobileActive:b}}),Q=G.ptm,ee=G.cx;t.useHandleStyle(O.css.styles,G.isUnstyled,{name:"menubar"});var ne=E(r.useEventListener({type:"click",listener:function(e){se(e)&&(X.current&&!X.current.contains(e.target)&&le())}}),2),te=ne[0],re=ne[1],ie=E(r.useResizeListener({listener:function(e){o.DomHandler.isTouchDevice()||le(e)}}),2),oe=ie[0],ae=ie[1],ue=function(e){b?(y(!1),le()):(y(!0),setTimeout((function(){ce()}),1)),e.preventDefault()},ce=function(){j({index:Ce(),level:0,parentKey:""}),o.DomHandler.focus(Z.current)},le=function(e){b&&(y(!1),setTimeout((function(){o.DomHandler.focus(V.current)}),0)),A([]),j({index:-1,level:0,parentKey:""}),e&&o.DomHandler.focus(Z.current),J(!1)},se=function(e){return Z.current!==e.target&&!Z.current.contains(e.target)&&V.current!==e.target&&!V.current.contains(e.target)},me=function(e,n){return e?o.ObjectUtils.getItemValue(e[n]):void 0},fe=function(e){return me(e,"separator")},pe=function(e){return e?me(e.item,"label"):void 0},de=function(e){return e&&o.ObjectUtils.isNotEmpty(e.items)},be=function(e){var n=e.processedItem,t=e.isFocus;if(!o.ObjectUtils.isEmpty(n)){var r=n.index,i=n.key,a=n.level,u=n.parentKey,c=o.ObjectUtils.isNotEmpty(n.items),l=K.filter((function(e){return e.parentKey!==u&&e.parentKey!==i}));c&&l.push(n),j({index:r,level:a,parentKey:u}),A(l),c&&J(!0),t&&o.DomHandler.focus(Z.current)}},ve=function(e){var n=C[k.index];if(n?o.ObjectUtils.isEmpty(n.parent):null){de(n)&&(be({originalEvent:e,processedItem:n}),j({index:-1,parentKey:n.key}),setTimeout((function(){return q(!0)}),0))}else{var t=-1!==k.index?Ke(k.index):Ce();He(t)}e.preventDefault()},ye=function(e){var n=C[k.index];if(o.ObjectUtils.isEmpty(n.parent)){de(n)&&(be({originalEvent:e,processedItem:n}),j({index:-1,parentKey:n.key}),$.current=!0,setTimeout((function(){return q(!0)}),0))}else{var t=K.find((function(e){return e.key===n.parentKey}));if(0===k.index&&t&&""===t.parentKey)j({index:-1,parentKey:t?t.parentKey:""}),W.current="",ge(e);else{var r=-1!==k.index?Ae(k.index):Le();He(r)}}e.preventDefault()},ge=function(e){var n=C[k.index],t=n?K.find((function(e){return e.key===n.parentKey})):null;if(t)be({originalEvent:e,processedItem:t}),A(K.filter((function(e){return e.key!==t.key})));else{var r=-1!==k.index?Ae(k.index):Le();He(r)}e.preventDefault()},xe=function(e){var n=C[k.index];if(n?K.find((function(e){return e.key===n.parentKey})):null){de(n)&&(be({originalEvent:e,processedItem:n}),j({index:-1,parentKey:n.key}),setTimeout((function(){return q(!0)}),0))}else{var t=-1!==k.index?Ke(k.index):Ce();He(t)}e.preventDefault()},Ie=function(e){He(De()),e.preventDefault()},he=function(e){He(Ue()),e.preventDefault()},Ee=function(e){if(-1!==k.index){var n=o.DomHandler.findSingle(Z.current,'li[id="'.concat("".concat(N),'"]')),t=n&&o.DomHandler.findSingle(n,'a[data-pc-section="action"]');t?t.click():n&&n.click()}e.preventDefault()},Oe=function(e){Ee(e)},ke=function(e){le(!0),j({focusedItemInfo:k,index:Ce()})},je=function(e){if(-1!==k.index){var n=C[k.index];!de(n)&&be({originalEvent:e,processedItem:n})}le()},Pe=function(e){return Se(e)&&pe(e).toLocaleLowerCase().startsWith(W.current.toLocaleLowerCase())},Se=function(e){return!!e&&!me(e.item,"disabled")&&!fe(e.item)},we=function(e){return Se(e)&&Ne(e)},Ne=function(e){return K.some((function(n){return n.key===e.key}))},De=function(){return C.findIndex((function(e){return Se(e)}))},Ue=function(){return o.ObjectUtils.findLastIndex(C,(function(e){return Se(e)}))},Ke=function(e){var n=e<C.length-1?C.slice(e+1).findIndex((function(e){return Se(e)})):-1;return n>-1?n+e+1:e},Ae=function(e){var n=e>0?o.ObjectUtils.findLastIndex(C.slice(0,e),(function(e){return Se(e)})):-1;return n>-1?n:e},Me=function(){return C.findIndex((function(e){return we(e)}))},Ce=function(){var e=Me();return e<0?De():e},Le=function(){var e=Me();return e<0?Ue():e},Re=function(e,n){W.current=(W.current||"")+n;var t=-1,r=!1;return-1!==(t=-1!==k.index?-1===(t=C.slice(k.index).findIndex((function(e){return Pe(e)})))?C.slice(0,k.index).findIndex((function(e){return Pe(e)})):t+k.index:C.findIndex((function(e){return Pe(e)})))&&(r=!0),-1===t&&-1===k.index&&(t=Ce()),-1!==t&&He(t),Y.current&&clearTimeout(Y.current),Y.current=setTimeout((function(){W.current="",Y.current=null}),500),r},He=function(e){k.index!==e&&(j(w(w({},k),{},{index:e})),Te())},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=-1!==e?"".concat(s,"_").concat(e):N,t=o.DomHandler.findSingle(Z.current,'li[id="'.concat(n,'"]'));t&&t.scrollIntoView&&t.scrollIntoView({block:"nearest",inline:"start"})},_e=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=[];return n&&n.forEach((function(n,a){var u=(""!==i?i+"_":"")+a,c={item:n,index:a,level:t,key:u,parent:r,parentKey:i};c.items=e(n.items,t+1,c,u),o.push(c)})),o};r.useMountEffect((function(){s||p(o.UniqueComponentId())})),r.useUpdateEffect((function(){b?(te(),oe(),o.ZIndexUtils.set("menu",Z.current,u&&u.autoZIndex||f.default.autoZIndex,u&&u.zIndex.menu||f.default.zIndex.menu)):(ae(),re(),o.ZIndexUtils.clear(Z.current))}),[b]),r.useUpdateEffect((function(){var e=_e(c.model||[],0,null,"");T(e)}),[c.model]),r.useUpdateEffect((function(){var e=K.find((function(e){return e.key===k.parentKey}));L(e?e.items:H)}),[K,k,H]),r.useUpdateEffect((function(){o.ObjectUtils.isNotEmpty(K)?(te(),oe()):(re(),ae())}),[K]),r.useUpdateEffect((function(){if(B){var e=-1!==k.index?Ke(k.index):$.current?Ue():Ce();He(e),$.current=!1,q(!1)}}),[B]),r.useUpdateEffect((function(){D(-1!==k.index?"".concat(s).concat(o.ObjectUtils.isNotEmpty(k.parentKey)?"_"+k.parentKey:"","_").concat(k.index):null)}),[k]),r.useUnmountEffect((function(){o.ZIndexUtils.clear(Z.current)})),m.useImperativeHandle(a,(function(){return{props:c,toggle:ue,getElement:function(){return X.current},getRootMenu:function(){return Z.current},getMenuButton:function(){return V.current}}}));var Be=function(){if(c.start){var e=o.ObjectUtils.getJSXElement(c.start,c),n=o.mergeProps({className:ee("start")},Q("start"));return m.createElement("div",n,e)}return null}(),qe=function(){if(c.end){var e=o.ObjectUtils.getJSXElement(c.end,c),n=o.mergeProps({className:ee("end")},Q("end"));return m.createElement("div",n,e)}return null}(),Fe=function(){if(c.model&&c.model.length<1)return null;var e=o.mergeProps(v(v(v(v({ref:V,href:"#",tabIndex:"0","aria-haspopup":!!(b&&c.model&&c.model.lentgh>0),"aria-expanded":b,"aria-label":n.ariaLabel("navigation"),"aria-controls":s,role:"button"},"tabIndex",0),"className",ee("button")),"onKeyDown",(function(e){var n;("Enter"===(n=e).code||"Space"===n.code)&&ue(n)})),"onClick",(function(e){return ue(e)})),Q("button")),t=o.mergeProps(Q("popupIcon")),r=o.IconUtils.getJSXIcon(c.menuIcon||m.createElement(i.BarsIcon,t),w({},t),{props:c});return m.createElement("a",e,r)}(),ze=m.createElement(P,{hostName:"Menubar",ariaActivedescendant:x?N:void 0,level:0,id:s,ref:Z,menuProps:c,model:H,onLeafClick:function(e){var n=e.originalEvent,t=e.processedItem,r=de(t),i=o.ObjectUtils.isEmpty(t.parent);if(Ne(t)){var a=t.index,u=t.key,c=t.level,l=t.parentKey;A(K.filter((function(e){return u!==e.key&&u.startsWith(e.key)}))),j({index:a,level:c,parentKey:l}),r||J(!i),setTimeout((function(){o.DomHandler.focus(Z.current),r&&J(!0)}),0)}else if(r)o.DomHandler.focus(Z.current),be({originalEvent:n,processedItem:t});else{var s=i?t:K.find((function(e){return""===e.parentKey})),m=s?s.index:-1;le(n),j({index:m,parentKey:s?s.parentKey:""}),y(!1)}},onItemMouseEnter:function(e){!b&&z&&be(e)},onFocus:function(e){I(!0),j(-1!==k.index?k:{index:Ce(),level:0,parentKey:""}),c.onFocus&&c.onFocus(e)},onBlur:function(e){I(!1),j({index:-1,level:0,parentKey:""}),W.current="",J(!1),c.onBlur&&c.onBlur(e)},onKeyDown:function(e){var n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":ve(e);break;case"ArrowUp":ye(e);break;case"ArrowLeft":ge(e);break;case"ArrowRight":xe(e);break;case"Home":Ie(e);break;case"End":he(e);break;case"Space":Oe(e);break;case"Enter":Ee(e);break;case"Escape":ke();break;case"Tab":je(e);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!n&&o.ObjectUtils.isPrintableCharacter(e.key)&&Re(e,e.key)}},root:!0,activeItemPath:K,focusedItemId:x?N:void 0,submenuIcon:c.submenuIcon,ptm:Q,cx:ee}),Je=o.mergeProps({id:c.id,ref:X,className:o.classNames(c.className,ee("root",{mobileActiveState:b})),style:c.style},O.getOtherProps(c),Q("root"));return m.createElement("div",Je,Be,Fe,ze,qe)})));N.displayName="Menubar",exports.Menubar=N;
