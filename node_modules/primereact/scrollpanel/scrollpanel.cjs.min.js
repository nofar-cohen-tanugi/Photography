"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("primereact/api"),n=require("primereact/hooks"),t=require("primereact/utils"),o=require("primereact/componentbase");function l(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:function(){return e[n]}})}})),r.default=e,Object.freeze(r)}var a=l(e);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c.apply(this,arguments)}function u(e){if(Array.isArray(e))return e}function s(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,l,a,c=[],u=!0,s=!1;try{if(l=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=l.call(n)).done)&&(c.push(t.value),c.length!==r);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function p(e,r){if(e){if("string"==typeof e)return i(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,r):void 0}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,r){return u(e)||s(e,r)||p(e,r)||d()}var m=o.ComponentBase.extend({defaultProps:{__TYPE:"ScrollPanel",id:null,style:null,className:null,children:void 0,step:5},css:{classes:{root:function(e){return t.classNames("p-scrollpanel p-component",e.props.className)},wrapper:"p-scrollpanel-wrapper",content:"p-scrollpanel-content",barx:"p-scrollpanel-bar p-scrollpanel-bar-x",bary:"p-scrollpanel-bar p-scrollpanel-bar-y"},styles:"\n        @layer primereact {\n            .p-scrollpanel-wrapper {\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                position: relative;\n                z-index: 1;\n                float: left;\n            }\n\n            .p-scrollpanel-content {\n                height: calc(100% + 18px);\n                width: calc(100% + 18px);\n                padding: 0 18px 18px 0;\n                position: relative;\n                overflow: auto;\n                box-sizing: border-box;\n            }\n\n            .p-scrollpanel-bar {\n                position: relative;\n                background: #c1c1c1;\n                border-radius: 3px;\n                z-index: 2;\n                cursor: pointer;\n                opacity: 0;\n                transition: opacity 0.25s linear;\n            }\n\n            .p-scrollpanel-bar-y {\n                width: 9px;\n                top: 0;\n            }\n\n            .p-scrollpanel-bar-x {\n                height: 9px;\n                bottom: 0;\n            }\n\n            .p-scrollpanel-hidden {\n                visibility: hidden;\n            }\n\n            .p-scrollpanel:hover .p-scrollpanel-bar,\n            .p-scrollpanel:active .p-scrollpanel-bar {\n                opacity: 1;\n            }\n\n            .p-scrollpanel-grabbed {\n                user-select: none;\n            }\n        }\n        "}}),h=a.forwardRef((function(e,l){var u=a.useContext(r.PrimeReactContext),s=m.getProps(e,u),i=f(a.useState(s.id),2),p=i[0],d=i[1],h=f(a.useState("vertical"),2),b=h[0],v=h[1],g=m.setMetaData({props:s}),y=g.ptm,w=g.cx;o.useHandleStyle(m.css.styles,g.isUnstyled,{name:"scrollpanel"});var x=a.useRef(null),D=a.useRef(null),H=a.useRef(null),E=a.useRef(null),C=f(a.useState(0),2),A=C[0],S=C[1],P=f(a.useState(0),2),R=P[0],L=P[1],O=a.useRef(!1),j=a.useRef(!1),T=a.useRef(null),z=a.useRef(null),N=a.useRef(null),F=a.useRef(null),I=a.useRef(null),M=a.useRef(!1),q=a.useRef(null),U=p+"_content",k=function(){var e=D.current.scrollWidth,r=-1*(x.current.clientHeight-H.current.clientHeight);N.current=D.current.clientWidth/e;var n=D.current.scrollHeight,o=-1*(x.current.clientWidth-E.current.clientWidth);F.current=D.current.clientHeight/n,I.current=window.requestAnimationFrame((function(){N.current>=1?t.DomHandler.addClass(H.current,"p-scrollpanel-hidden"):(t.DomHandler.removeClass(H.current,"p-scrollpanel-hidden"),H.current.style.cssText="width:"+Math.max(100*N.current,10)+"%; left:"+D.current.scrollLeft/e*100+"%;bottom:"+r+"px;"),F.current>=1?t.DomHandler.addClass(E.current,"p-scrollpanel-hidden"):(t.DomHandler.removeClass(E.current,"p-scrollpanel-hidden"),E.current.style.cssText="height:"+Math.max(100*F.current,10)+"%; top: calc("+D.current.scrollTop/n*100+"% - "+H.current.clientHeight+"px);right:"+o+"px;")}))},B=function(e){H.current.isSameNode(e.target)?v("horizontal"):E.current.isSameNode(e.target)&&v("vertical")},_=function(){"horizontal"===b&&v("vertical")},W=function(e){O.current?Y(e):(j.current||Y(e),K(e))},Y=function(e){var r=e.pageX-T.current;T.current=e.pageX,I.current=window.requestAnimationFrame((function(){D.current.scrollLeft+=r/N.current}))},K=function(e){var r=e.pageY-z.current;z.current=e.pageY,I.current=window.requestAnimationFrame((function(){D.current.scrollTop+=r/F.current}))},X=function e(r){t.DomHandler.removeClass(E.current,"p-scrollpanel-grabbed"),t.DomHandler.removeClass(H.current,"p-scrollpanel-grabbed"),t.DomHandler.removeClass(document.body,"p-scrollpanel-grabbed"),document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",e),O.current=!1,j.current=!1},$=function(e){if("vertical"===b)switch(e.code){case"ArrowDown":Q("scrollTop",s.step),e.preventDefault();break;case"ArrowUp":Q("scrollTop",-1*s.step),e.preventDefault();break;case"ArrowLeft":case"ArrowRight":e.preventDefault()}else if("horizontal"===b)switch(e.code){case"ArrowRight":Q("scrollLeft",s.step),e.preventDefault();break;case"ArrowLeft":Q("scrollLeft",-1*s.step),e.preventDefault();break;case"ArrowDown":case"ArrowUp":e.preventDefault()}},G=function(){V()},J=function(e,r){D.current[e]+=r,k()},Q=function(e,r){V(),q.current=setTimeout((function(){J(e,r)}),40)},V=function(){q.current&&clearTimeout(q.current)},Z=function(){k()};n.useMountEffect((function(){var e,r,n;s.id||d(t.UniqueComponentId()),k(),window.addEventListener("resize",k),e=getComputedStyle(x.current),r=getComputedStyle(H.current),n=t.DomHandler.getHeight(x.current)-parseInt(r.height,10),"none"!==e["max-height"]&&0===n&&(x.current.style.height=D.current.offsetHeight+parseInt(r.height,10)>parseInt(e["max-height"],10)?e["max-height"]:D.current.offsetHeight+parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+"px"),M.current=!0})),n.useUnmountEffect((function(){M.current&&window.removeEventListener("resize",k),I.current&&window.cancelAnimationFrame(I.current)})),a.useImperativeHandle(l,(function(){return{props:s,refresh:Z,getElement:function(){return x.current},getContent:function(){return D.current},getXBar:function(){return H.current},getYBar:function(){return E.current}}}));var ee=t.mergeProps({id:s.id,ref:x,style:s.style,className:w("root")},m.getOtherProps(s),y("root")),re=t.mergeProps({className:w("wrapper")},y("wrapper")),ne=t.mergeProps({className:w("content"),onScroll:function(e){A!==e.target.scrollLeft?(S(e.target.scrollLeft),v("horizontal")):R!==e.target.scrollTop&&(L(e.target.scrollTop),v("vertical")),k()},onMouseEnter:k},y("content")),te=t.mergeProps({ref:H,role:"scrollbar",className:w("barx"),tabIndex:0,"aria-valuenow":R,"aria-controls":U,"aria-orientation":"horizontal",onFocus:B,onBlur:_,onKeyDown:$,onKeyUp:G,onMouseDown:function(e){O.current=!0,T.current=e.pageX,t.DomHandler.addClass(H.current,"p-scrollpanel-grabbed"),t.DomHandler.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",W),document.addEventListener("mouseup",X),e.preventDefault()}},y("barx")),oe=t.mergeProps({ref:E,role:"scrollbar",className:w("bary"),tabIndex:0,"aria-valuenow":A,"aria-controls":U,"aria-orientation":"vertical",onFocus:B,onBlur:_,onKeyDown:$,onKeyUp:G,onMouseDown:function(e){j.current=!0,z.current=e.pageY,t.DomHandler.addClass(E.current,"p-scrollpanel-grabbed"),t.DomHandler.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",W),document.addEventListener("mouseup",X),e.preventDefault()}},y("bary"));return a.createElement("div",ee,a.createElement("div",re,a.createElement("div",c({ref:D},ne),s.children)),a.createElement("div",te),a.createElement("div",oe))}));h.displayName="ScrollPanel",exports.ScrollPanel=h;
